<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Scripting Tips and Tricks | Min Soe Han</title><meta name=description content="Personal website of Min Soe Han – sharing tech notes on Linux, Bash, Dash, JavaScript, Hugo, Cloudflare, plus insights on Myanmar Labour Laws, legal articles, and open diary stories."><link rel=canonical href=https://minsoehan.com/others/scripting-tips-and-tricks/><meta property="og:type" content="article"><meta property="og:title" content="Scripting Tips and Tricks | Min Soe Han"><meta property="og:description" content="Personal website of Min Soe Han …"><meta property="og:url" content="https://minsoehan.com/others/scripting-tips-and-tricks/"><meta property="og:site_name" content="Min Soe Han"><meta property="og:image" content="/images/msh-default-photo.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Scripting Tips and Tricks | Min Soe Han"><meta name=twitter:description content="Personal website of Min Soe Han …"><meta name=twitter:image content="/images/msh-default-photo.png"><link rel=sitemap type=application/xml title=Sitemap href=/sitemap.xml><link rel=icon type=image/png href=/favicon/favicon-96x96.png sizes=96x96><link rel=icon type=image/svg+xml href=/favicon/favicon.svg><link rel="shortcut icon" href=/favicon/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-touch-icon.png><link rel=manifest href=/favicon/site.webmanifest><link rel=stylesheet href=/fonts/material-symbols/outlined.css><link rel=stylesheet href=/fonts/material-symbols/rounded.css><link rel=stylesheet href=/fonts/fontawesome/css/fontawesome.css><link rel=stylesheet href=/fonts/fontawesome/css/brands.css><link rel=stylesheet href=/fonts/fontawesome/css/solid.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-9H7R6FMDJ6"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9H7R6FMDJ6")</script><link rel=stylesheet href=/css/base.min.3ddb7f47882f79f66381ebd0ffd47bb2fcf1c9161d709d572ea51ebae89af178.css integrity="sha256-Pdt/R4gvefZjgevQ/9R7svzxyRYdcJ1XLqUeuuia8Xg=" crossorigin=anonymous><script src=/js/base.68c7a7926b6ee35fb1c3fc2cf07f8dfa9107d59ac255e9fe9fdf7f88d0d172bc.js integrity="sha256-aMenkmtu41+xw/ws8H+N+pEH1ZrCVen+n99/iNDRcrw=" crossorigin=anonymous></script><link rel=stylesheet href=/css/header.min.89f1703490de606e7d790fe24c046bd072be7572cc5e39e2e47ae0e673669d18.css integrity="sha256-ifFwNJDeYG59eQ/iTARr0HK+dXLMXjni5Hrg5nNmnRg=" crossorigin=anonymous><script src=/js/header.648dd4092c3b846018bd686e7f8f0fe0b899f45311722f1d23ff5a2e9bd1568f.js integrity="sha256-ZI3UCSw7hGAYvWhuf48P4LiZ9FMRci8dI/9aLpvRVo8=" crossorigin=anonymous></script><link rel=stylesheet href=/css/footer.min.e407844c945fec8f835d68fd1a3b39c9faae95a69fa749ddf43c3daf7cd8fcfe.css integrity="sha256-5AeETJRf7I+DXWj9Gjs5yfqulaafp0nd9Dw9r3zY/P4=" crossorigin=anonymous><link rel=stylesheet href=/css/page.min.8c44fb29e7c18c137b030ac377090e74724f4df1aa0685526e7302198f7d8318.css integrity="sha256-jET7KefBjBN7AwrDdwkOdHJPTfGqBoVSbnMCGY99gxg=" crossorigin=anonymous><link rel=stylesheet href=/css/breadcrumbs.min.00e902ec96cc38f04e0a160ae899b9051183575541063a249295608ea09b6a82.css integrity="sha256-AOkC7JbMOPBOChYK6Jm5BRGDV1VBBjokkpVgjqCbaoI=" crossorigin=anonymous><link rel=stylesheet href=/css/aside.min.fa713eebf3ae798a6c6bd52e2616b053e58a56baafcb41f3fd3737c7d3b87cbf.css integrity="sha256-+nE+6/OueYpsa9UuJhawU+WKVrqvy0Hz/Tc3x9O4fL8=" crossorigin=anonymous><script src=/js/page.ff0da435803832c627173d1248f1dc93cd865707b71e80c19179eefc8452190b.js integrity="sha256-/w2kNYA4MsYnFz0SSPHck82GVwe3HoDBkXnu/IRSGQs=" crossorigin=anonymous></script><link rel=stylesheet href=/css/code-header.min.8361ccd8d8cb761d2a78cefca638f94c480c10e289d54c9e82103b45e9f01532.css integrity="sha256-g2HM2NjLdh0qeM78pjj5TEgMEOKJ1UyeghA7RenwFTI=" crossorigin=anonymous><script src=/js/code-header.9a6a051f7bdb0306fd8c8ee6754f0f67eb5ecc1994fed2a1f24de36506e2bd6f.js integrity="sha256-mmoFH3vbAwb9jI7mdU8PZ+tezBmU/tKh8k3jZQbivW8=" crossorigin=anonymous defer></script></head><body><header><div class=row-one><div class=menu-title-search><div id=mobile-menu-button aria-label="Open menu"><svg id="icon-menu" height="24" viewBox="0 -960 960 960" width="24" fill="#eee"><path d="M120-240v-80h720v80H120zm0-2e2v-80h720v80H120zm0-2e2v-80h720v80H120z"/></svg>
<svg id="icon-close" height="24" viewBox="0 -960 960 960" width="24" fill="#eee"><path d="m256-2e2-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224z"/></svg></div><div><a href=/ class=site-title>Min Soe Han</a></div><a href=/search class=main-search-icon><svg height="24" viewBox="0 -960 960 960" width="24" fill="#eee"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580t75.5-184.5T380-840t184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56zM380-4e2q75 0 127.5-52.5T560-580t-52.5-127.5T380-760t-127.5 52.5T2e2-580t52.5 127.5T380-4e2z"/></svg></a></div></div><div class=row-two><div class=navbar-wrapper><div class=left-box><nav><ul class=main-menu-parents><li><a href=/tech/>Tech</a></li><li><a href=/legal/>Legal<i class="fa-solid fa-chevron-down has-children-indicator"></i></a>
<span class="material-symbols-outlined toggle-child-menu">keyboard_arrow_right</span><ul class=main-menu-children><li><a href=/legal/labor-laws/>Labor Laws</a></li><li><a href=/legal/investment/>Investment</a></li></ul></li><li><a href=/open-diary/>Open Diary</a></li><li><a aria-current=true class=ancestor href=/others/>Others</a></li><li><a href=/about/>About</a></li></ul></nav></div><div class=right-box><a href=https://github.com/minsoehan><i class="fa-brands fa-github"></i></a>
<a href=https://codeberg.org/minsoehan><i class="fa-solid fa-code"></i></a><div><span class=material-symbols-outlined>email</span>&ensp;minsoehan243@gmail.com</div><div><span class=material-symbols-outlined>phone</span>&ensp;+95 9 25 731 3341</div></div></div></div><span id=scrollup><svg height="54" viewBox="0 -960 960 960" width="54" fill="#2f2f2f"><path d="M480-528 296-344l-56-56 240-240 240 240-56 56-184-184z"/></svg></span></header><main><div class=breadcrumbs-wrapper><a href=/>home</a>
<span class=breadcrumbs-divider>></span>
<a href=/others>others</a>
<span class=breadcrumbs-divider>></span>
<span>scripting-tips-and-tricks</span></div><div class=page><article data-pagefind-body><h1>Scripting Tips and Tricks</h1><span class=material-symbols-outlined id=expand-right-onoff>expand_circle_right</span>
<time datetime=2026-02-11T12:06:51+06:30>February 11, 2026</time><p>This is my collection of my tips and tricks for writing Bash or Dash scripts. These are what I understood after many years of using linux and writing the scripts.</p><h4 class=mt3rem id=immediate-return>Immediate Return</h4><p>If Bash is waiting for a command to complete and receives a signal for which a trap has been set, it will not execute the trap until the command completes. If Bash is waiting for an <strong>asynchronous command via the wait builtin</strong>, and it receives a signal for which a trap has been set, the wait builtin will return immediately with an exit status greater than 128, immediately after which the shell executes the trap.<br>↳ <a href=https://www.gnu.org/software/bash/manual/html_node/Signals.html>https://www.gnu.org/software/bash/manual/html_node/Signals.html</a></p><p>Bash သို့မဟုတ် Dash script တွေမှာ command တစ်ခုပြီးအောင် စောင့်နေတဲ့အချိန် trap signal တစ်ခုလက်ခံရတဲ့အခါ ချက်ချင်းတုန့်ပြန်လိမ့်မယ်လို့ ထင်ခဲ့တယ်။ မဟုတ်ပါဘူး။ တကယ်က script ဟာ လက်ရှိ စောင့်နေတဲ့ command ပြီးမှ လက်ခံရခဲ့တဲ့ trap signal အတိုင်း ဆက်လက်ဆောင်ရွက်တာပါ။ ချက်ချင်းတုန့်ပြန်တာမျိုးကိုလိုချင်ရင်တော့ command ကို background မှာ run ခိုင်းပြီး wait နဲ့ စောင့်ကြည့်ရပါတယ်။ ဒါကို အထက်စာပိုဒ်မှာ &mldr; waiting for an <strong>asynchronous command via the wait builtin</strong>, &mldr; လို့ ဆိုပါတယ်။ <strong>asynchronous</strong> ဆိုတာ background ကိုဆိုလိုပါတယ်။ command အပြီး နောက်ဆုံးမှာ <code>&</code> လေးထည့်ပြီး run တာဖြစ်ပါတယ်။ ဥပမာ - <code>sleep 30 &</code> ဟာ background မှာ ၃၀ စက္ကန့်ဆိုင်းငံ့နေဖို့ ခိုင်းစေတဲ့ command ဖြစ်ပါတယ်။ ဒီသဘောတရားဟာ status bar တွေလို realtime update လုပ်ဖို့လိုတဲ့ script တွေရေးဖို့ အသုံးဝင်ပါတယ်။</p><div class=code-header><div class=text>~</div><div class=copy-code-below><i class="fa-solid fa-copy"></i></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>...
</span></span><span style=display:flex><span>sleep <span style=color:#a5d6ff>3</span> &amp;
</span></span><span style=display:flex><span>wait <span style=color:#79c0ff>$!</span>
</span></span><span style=display:flex><span>...</span></span></code></pre></div></div><p>See: <a href=/tech/mshstatus>mshstatus</a></p><h4 class=mt3rem id=asynchronous-and-self-toggle>Asynchronous and Self-toggle</h4><p>Software တစ်ခုကို terminal ထဲမှာ run ကြည့်ရင် Software ဖွင့်လာပေမယ့် terminal နဲ့ software တွဲဆက်နေတာကို တွေ့ပါလိမ့်မယ်။ terminal ထဲမှာ control+c ကို နှိပ်လိုက်ရင် software ပိတ်သွားပါလိမ့်မယ်။ အဲ့သည့်လို တွဲနေတာမျိုး မဖြစ်ချင်ရင်တော့ နောက်ဆုံးမှာ <code>&</code> လေးထည့်ပြီး run လိုက်ရုံပါပဲ။ နောက်ဆုံးမှာ <code>&</code> ထည့်ပြီး run တာကို asynchronous လို့ခေါ်ပါတယ်။ background မှာ run ခိုင်းခြင်းဖြစ်ပါတယ်။ သို့သော် software တစ်ခုကို app launcher ကနေ run မယ်ဆိုရင် <code>&</code> ထည့်ရေး မထည့်ရေး ကိစ္စ အာရုံစိုက်စရာမလိုပါဘူး။ အဲ့သည့် app launcher က software ကို background မှာ run ပေးပါတယ်။ ဒီတော့ script တွေရေးတဲ့ အခါမှာလည်း background မှာ run ရေးကိစ္စကို အခြေအနေအများစုအတွက် အာရုံစိုက်နေစရာမလိုပါ။ background မှာ run ချင်ရင် <a href=https://codeberg.org/adnano/wmenu>wmenu</a> လို menu launcher ကနေ run လိုက်ရုံသာ ဖြစ်ပါသည်။ ဒီသဘောတရားအရဆိုရင် အောက်မှာပြထားတဲ့ logic ဟာ အရမ်းကောင်းတဲ့ စိတ်ကူးတစ်ခုဖြစ်ပါတယ်။</p><div class=code-header><div class=text>~</div><div class=copy-code-below><i class="fa-solid fa-copy"></i></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>...
</span></span><span style=display:flex><span>exitssboard_func <span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>    notify-send -t <span style=color:#a5d6ff>600</span> -h string:x-canonical-private-synchronous:ssboard -- <span style=color:#a5d6ff>&#34; &#34;</span> <span style=color:#a5d6ff>&#34;closed\n_&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>trap <span style=color:#a5d6ff>&#39;exitssboard_func&#39;</span> EXIT
</span></span><span style=display:flex><span>trap <span style=color:#a5d6ff>&#39;exit 0&#39;</span> INT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#79c0ff>SCRIPTNAME</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;</span><span style=color:#ff7b72>$(</span>basename -- <span style=color:#a5d6ff>&#34;</span><span style=color:#79c0ff>$0</span><span style=color:#a5d6ff>&#34;</span><span style=color:#ff7b72>)</span><span style=color:#a5d6ff>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>if</span> pidof -xq <span style=color:#a5d6ff>&#34;</span><span style=color:#79c0ff>$SCRIPTNAME</span><span style=color:#a5d6ff>&#34;</span> -o <span style=color:#a5d6ff>&#34;</span><span style=color:#79c0ff>$$</span><span style=color:#a5d6ff>&#34;</span>; <span style=color:#ff7b72>then</span>
</span></span><span style=display:flex><span>    pkill -INT <span style=color:#a5d6ff>&#34;</span><span style=color:#79c0ff>$SCRIPTNAME</span><span style=color:#a5d6ff>&#34;</span>
</span></span><span style=display:flex><span>    exit <span style=color:#a5d6ff>0</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>fi</span>
</span></span><span style=display:flex><span>...</span></span></code></pre></div></div><p>script ကို menu launcher ကနေ background မှာ run လို့ရသလို terminal ထဲမှာ run လို့လည်း ရပါတယ်။ နောက်ပြီး script ဟာ self toggle ဖြစ်နေတာပါပဲ။ တူညီတဲ့ script name တစ်ခုက run နေပြီးသားဖြစ်ရင် အဲ့သည့် script process ဆီကို INT (control+c) signal ပို့လိုက်တာပဲဖြစ်ပါတယ်။ <code>trap 'exit 0' INT</code> ဟာ EXIT signal ကိုပါ trap လုပ်မှာဖြစ်တဲ့အတွက် EXIT trap မှာရှိတဲ့ command သို့မဟုတ် function ကိုလည်း တစ်ဆက်တည်း ဆောင်ရွက်သွားမှာ ဖြစ်ပါတယ်။ ဒီနေရာမှာ အောက်က <code>trap</code> နှစ်ခုကို နားလည်အောင် ကြည့်ဖို့လိုပါတယ်။</p><div class=code-header><div class=text>~</div><div class=copy-code-below><i class="fa-solid fa-copy"></i></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>trap <span style=color:#a5d6ff>&#39;exitssboard_func&#39;</span> EXIT
</span></span><span style=display:flex><span>trap <span style=color:#a5d6ff>&#39;exit 0&#39;</span> INT</span></span></code></pre></div></div><h4 class=mt3rem id=replacing-previous-notification-and-double-dashes-in-options>Replacing Previous Notification and Double Dashes in Options</h4><p>အပေါ်က နမူနာမှာ <code>notify-send -t 600 -h string:x-canonical-private-synchronous:ssboard -- " " "closed\n_"</code> ဟာလည်း မှတ်သားသင့်တဲ့ အရာတစ်ခုဖြစ်ပါတယ်။</p><div class=code-header><div class=text>~</div><div class=copy-code-below><i class="fa-solid fa-copy"></i></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72>while</span> true; <span style=color:#ff7b72>do</span>
</span></span><span style=display:flex><span>    notify-send <span style=color:#a5d6ff>&#34;Now:&#34;</span> <span style=color:#a5d6ff>&#34;</span><span style=color:#ff7b72>$(</span>date<span style=color:#ff7b72>)</span><span style=color:#a5d6ff>&#34;</span>
</span></span><span style=display:flex><span>    sleep <span style=color:#a5d6ff>1</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>done</span></span></span></code></pre></div></div><p>အပေါ်က script ဟာ တစ်စက္ကန့်တိုင်းမှာ notification အသစ်တစ်ခုစီ ပြပေးပါလိမ့်မယ်။ သို့သော် အောက်က နမူနာ script ကတော့ notification တစ်ခုတည်းမှာပဲ date command ရဲ့ second, minute, hour တွေဟာ တစ်ခြားစာသားတွေကို တစ်ဖြတ်ဖြတ်မဖြစ်စေဘဲ (non-flickering) ပြောင်းလဲနေပါလိမ့်မယ်။</p><div class=code-header><div class=text>~</div><div class=copy-code-below><i class="fa-solid fa-copy"></i></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ff7b72>while</span> true; <span style=color:#ff7b72>do</span>
</span></span><span style=display:flex><span>    notify-send -h string:x-canonical-private-asynchronous:mynoti <span style=color:#a5d6ff>&#34;Now:&#34;</span> <span style=color:#a5d6ff>&#34;</span><span style=color:#ff7b72>$(</span>date<span style=color:#ff7b72>)</span><span style=color:#a5d6ff>&#34;</span>
</span></span><span style=display:flex><span>    sleep <span style=color:#a5d6ff>1</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>done</span></span></span></code></pre></div></div><p><code>mynoti</code> ဆိုတာကို ကြိုက်ရာနဲ့ အစားထိုးအသုံးပြုလို့ ရပါတယ်။<br>↳ <a href=https://wiki.archlinux.org/title/Desktop_notifications#Replace_previous_notification>https://wiki.archlinux.org/title/Desktop_notifications#Replace_previous_notification</a><br>↳ <a href=https://wiki.archlinux.org/title/Desktop_notifications>https://wiki.archlinux.org/title/Desktop_notifications</a></p><section data-pagefind-ignore><div class=categories-tags-container><div class=categories><span>Categories&ensp;</span>
<span>&ensp;&bull;&#8202;</span>
<a href=/categories/dash/>Dash</a>
<span>&ensp;&bull;&#8202;</span>
<a href=/categories/bash/>Bash</a>
<span>&ensp;&bull;&#8202;</span>
<a href=/categories/tech/>Tech</a></div><div class=tags><span>Tags&ensp;</span>
<span>&ensp;&bull;&#8202;</span>
<a href=/tags/script/>Script</a>
<span>&ensp;&bull;&#8202;</span>
<a href=/tags/trap/>Trap</a>
<span>&ensp;&bull;&#8202;</span>
<a href=/tags/asynchronous/>Asynchronous</a></div></div></section></article><aside><div class=aside-sidebar><div class=section-info><h2><a href=/others/>Others</a></h2><a href=/others/scripting-tips-and-tricks/>Scripting Tips and Tricks</a>
<a href=/others/human-and-windows/>လူနှင့် ပြတင်းပေါက်</a>
<a href=/others/taxi-in-yangon/>Taxi Services in Yangon</a>
<a href=/others/ygn-postal-codes/>Yangon Postal/Zip Codes</a>
<a href=/others/>MORE</a></div><div class=categories><h3><a href=/categories/>Categories</a></h3><a href=/categories/legal/>Legal (26)</a>
<a href=/categories/tech/>Tech (23)</a>
<a href=/categories/labor-law/>Labor Law (23)</a>
<a href=/categories/dev/>Dev (5)</a>
<a href=/categories/linux/>Linux (5)</a>
<a href=/categories/dash/>Dash (4)</a>
<a href=/categories>MORE</a></div><div class=tags><h3><a href=/tags/>Tags</a></h3><a href=/tags/leave-and-holiday/>Leave and Holiday (7)</a>
<a href=/tags/dash/>Dash (4)</a>
<a href=/tags/osh/>Osh (4)</a>
<a href=/tags/cloudflare/>Cloudflare (3)</a>
<a href=/tags/script/>Script (3)</a>
<a href=/tags/hugo/>Hugo (2)</a>
<a href=/tags/>MORE</a></div><div class=latest-posts><h3>Latest Posts</h3><a href=/tech/mexii/>mexii</a>
<a href=/tech/sway-perwindow-kb-layout/>Sway Per-window Keyboard Layout</a>
<a href=/tech/mshstatus/>mshstatus</a>
<a href=/tech/awk/getting-started/>AWK Basic</a>
<a href=/tech/pwa/>Progressive Web App (PWA)</a>
<a href=/tech/image-processing/>Image Processing for Website</a>
<a href=/tech/astro-notes/>Astro Notes</a>
<a href=/tech/reset-local-repo/>Reset Local Repo to Match Remote Repo Exactly</a>
<a href=/tech/astro-blog-build/>Astro Blog Build</a></div></div></aside></div></main><footer><div class=wrapper><div class=left-box><a href=/>Min Soe Han</a></div><div class=right-box><p>&copy; All rights reserved by Min Soe Han</p></div></div></footer></body></html>